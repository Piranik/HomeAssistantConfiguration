title: Info
icon: mdi:lan
path: info
panel: true
popup_cards:
  sensor.processor_use:
    title: "CPU use"
    card:
      type: history-graph
      title: "CPU load"
      show:
        icon: false
        extrema: true
      entities:
        - sensor.load_1m
        - sensor.load_5m
        - sensor.load_15m
        - sensor.cpu_temperature
  sensor.memory_use_percent:
    title: "RAM use"
    card:
      type: history-graph
      entities:
        - sensor.memory_free
        - sensor.swap_use

  sensor.nas_cpu_use_percent:
    title: "CPU use"
    card:
      type: history-graph
      title: "CPU load"
      show:
        icon: false
        extrema: true
      entities:
        - sensor.nas_cpu_load_1m
        - sensor.nas_cpu_load_5m
        - sensor.nas_cpu_load_15m
        - sensor.nas_cpu_temperature
  sensor.nas_memory_use_percent:
    title: "RAM use"
    card:
      type: history-graph
      entities:
        - sensor.nas_memory_free
        - sensor.nas_swap_use

cards:
  - type: vertical-stack
    cards:
      - type: custom:compact-custom-header
      - type: custom:layout-card
        cards:
          - type: vertical-stack
            cards:
              - type: custom:monster-card
                show_empty: false
                card:
                  type: glance
                  title: "Устройства"
                  show_state: false
                  columns: 4
                filter:
                  include:
                    - entity_id: sensor.system_gateway
                    - entity_id: sensor.system_nas
                    - entity_id: 'sensor.system_security_*'
                    - entity_id: 'sensor.system_server_*'
                    - entity_id: 'sensor.system_*'
                  exclude:
                    - entity_id: sensor.system_uplink

              - type: custom:monster-card
                show_empty: false
                card:
                  type: glance
                  title: "Соединения"
                  show_state: false
                filter:
                  include:
                    - entity_id: sensor.connection_internet
                    - entity_id: sensor.connection_wifi_ap
                    - entity_id: 'sensor.connection_*'

          - type: vertical-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: entities
                    title: "NAS сервер"
                    show_header_toggle: false
                    entities:
                      - entity: sensor.nas_last_boot
                        name: "Last boot"
                      - entity: sensor.nas_pool_pool1_health
    
                  - type: custom:useful-markdown-card
                    content: |
                      [[ sensor.nas_alerts ]]

              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    show:
                      icon: false
                    name: "CPU use"
                    hour24: true
                    entities:
                      - sensor.nas_cpu_use_percent
                    color_thresholds:
                      - value: -1
                        color: green
                      - value: 70
                        color: lightgreen
                      - value: 100
                        color: orange
                      - value: 300
                        color: red
                    tap_action:
                      action: more-info
                  - type: custom:mini-graph-card
                    name: "RAM use"
                    show:
                      icon: false
                    hour24: true
                    entities:
                      - sensor.nas_memory_use_percent
                    color_thresholds:
                      - value: -1
                        color: green
                      - value: 70
                        color: orange
                    tap_action:
                      action: more-info
                  - type: custom:mini-graph-card
                    name: "Pool use"
                    show:
                      icon: false
                    hour24: true
                    lower_bound: 0
                    entities:
                      - sensor.nas_pool_pool1_use_percent
                    color_thresholds:
                      - value: -1
                        color: green
                      - value: 75
                        color: orange
                      - value: 80
                        color: red

              - type: custom:monster-card
                show_empty: false
                card:
                  type: glance
                filter:
                  include:
                    - entity_id: 'sensor.nas_disk_*_temperature'

          - type: vertical-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: entities
                    title: "HAss сервер"
                    show_header_toggle: false
                    entities:
                      - entity: sensor.last_boot
                        name: "Last boot"
                      - entity: sensor.cert
                        # name: "SSL Cert"

                  - type: custom:useful-markdown-card
                    content: |
                      [[ sensor.hass_alerts ]]

              - type: horizontal-stack
                cards:
                  - type: custom:mini-graph-card
                    show:
                      icon: false
                    name: "CPU use"
                    hour24: true
                    entities:
                      - sensor.processor_use
                    color_thresholds:
                      - value: -1
                        color: green
                      - value: 70
                        color: lightgreen
                      - value: 100
                        color: orange
                      - value: 300
                        color: red
                    tap_action:
                      action: more-info
                  - type: custom:mini-graph-card
                    name: "RAM use"
                    show:
                      icon: false
                    hour24: true
                    entities:
                      - sensor.memory_use_percent
                    color_thresholds:
                      - value: -1
                        color: green
                      - value: 70
                        color: orange
                    tap_action:
                      action: more-info
                  - type: custom:mini-graph-card
                    name: "Disk use"
                    show:
                      icon: false
                    hour24: true
                    entities:
                      - sensor.disk_use_percent
                    color_thresholds:
                      - value: -1
                        color: green
                      - value: 75
                        color: orange
                      - value: 90
                        color: red

          - type: custom:mini-graph-card
            name: "Скорость Интернета"
            height: 75
            hour24: true
            show:
              icon: false
              extrema: true
              fill: false
            entities:
              - entity: sensor.speedtest_download
                name: "Приём"
              - entity: sensor.speedtest_upload
                name: "Отправка"

          - !include dev_card.yaml
